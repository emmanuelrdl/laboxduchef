 <div id="body-container">
    <div class="container">
      <div class="row">
         <% if current_user.orders.count >= 1 %>
        <div class="col-xs-12 col-md-6 col-md-offset-3 text-center user-payment-box"  >
          <h4 class="form-header-no-margin">CONFIRMATION DE VOTRE COMMANDE</h4>
            <div class="payment_show_info_alignment col-xs-11 col-xs-offset-1 col-sm-6 col-sm-offset-3 text-center">
               <h4 class="order_recap_meal_name"  > <%= image_tag "foodbox_brown.png", size:"20x20" %>
                 &nbsp<%= @last_order.quantity %> <%= @last_order.meal.name %> </h4>
                <div class="payment_meal_take_away_date">  <%= render "users/client_meal_take_away_date" %>
              </div>
              <div><%= render "users/client_meal_take_away_time" %></div>
            </div>
            <div class="col-xs-12 payment_show_restaurant_infos" >
                <div class="payment_show_restaurant_picture col-xs-12" style="background-image: url('<%=image_path @last_order.meal.restaurant.picture.url(:medium)%>')">
                    <div class="card-filter"> </div>
                    <h4 class="payment_show_restaurant_name" > <%= @last_order.meal.restaurant.name.upcase %>  </h4>
                    <p class="payment_show_restaurant_address">  <i class="fa fa-map-marker"></i> <%= @last_order.meal.restaurant.full_address %></p>
                    <div id="get_direction" class="btn btn-direction"> Itinéraire</div>
                </div>
                <div id="get_direction_hidden_map" class="col-xs-12">
                  <div id="map" class="map_payment" > </div>
                  <div id="get_direction_detail" class="btn btn-direction-detail">Détails</div>
                </div>
              <div id="map-directions" hidden="true"></div>
            </div>
          <div class="col-xs-12 form-header-content-title" >
            <h5 class="form-header">RÉCUPÉRER MA BOX</h5>
             <p class="grey-text">Pour récupérer votre box il vous suffit de vous présenter chez notre partenaire aux horaires indiquées ci-dessus en précisant le nom auquel vous avez effectué la réservation</p>
             <p class="grey-text"> <i class="fa fa-exclamation-circle"></i> Pour des raisons sanitaires les plats sont à consommer le jour de l'achat </p>
          </div>
          <div class="col-xs-12 grey-text">
            <h5>Bon appétit et merci pour votre confiance !</h5>
          </div>

            <%= link_to "Accueil", root_path, class: "btn btn-empty-basket" %>

      </div>




 <% content_for(:after_js) do %>
              <%= javascript_tag do %>


$("#get_direction_detail").hide();
$("#get_direction_hidden_map").hide();
$('#get_direction').click(function(e){
$("#get_direction_hidden_map").show();
$("#get_direction_detail").show();

    var directionsService = new google.maps.DirectionsService(),
      directionsDisplay = new google.maps.DirectionsRenderer(),
      createMap = function (start) {
        var travel = {
            origin : (start.coords)? new google.maps.LatLng(start.lat, start.lng) : start.address,
            destination : ("<%=@restaurant_full_address%>"),
            travelMode : google.maps.DirectionsTravelMode.WALKING
          },
          mapOptions = {
            zoom: 10,
            // Default view: downtown Stockholm
            center : "Paris, France",
            mapTypeId: google.maps.MapTypeId.ROADMAP
          };

        map = new google.maps.Map(document.getElementById("map"), mapOptions);
        directionsDisplay.setMap(map);
        directionsDisplay.setPanel(document.getElementById("map-directions"));
        directionsService.route(travel, function(result, status) {
          if (status === google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(result);
             hideSteps(response);

          }
        });
      };

      // Check for geolocation support
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (position) {
            // Success!
            createMap({
              coords : true,
              lat : position.coords.latitude,
              lng : position.coords.longitude
            });
          },
          function () {
            // Gelocation fallback: Defaults to Stockholm, Sweden
            createMap({
              coords : false,
              address : "Paris, France"
            });
          }
        );
      }
      else {
        // No geolocation fallback: Defaults to Lisbon, Portugal
        createMap({
          coords : false,
          address : "Paris, France"
        });
      }
  })();



    <% end %>
    <% end %>


   <% else %>
        <div class="col-xs-12 col-md-6 col-md-offset-3 text-center form-box" >
          <h4 class="form-header-no-margin">DERNIÈRE COMMANDE</h4>
          <%= image_tag "logo-black.png", size:"250x100"  %>
          <h3> Vous n'avez pas de commandes en cours</h3>
          <div><%= link_to "Accueil", root_path, class: "btn btn-empty-basket" %>  </div>
          </div>
    <% end -%>

    </div>
  </div>
</div>
